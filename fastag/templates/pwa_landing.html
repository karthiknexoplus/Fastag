<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get the FASTag App</title>
    <meta name="theme-color" content="#764ba2">
    <link rel="manifest" href="/static/manifest.json">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
            color: #fff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        .container {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding-top: 2rem;
            padding-bottom: 2rem;
        }
        .app-logo {
            width: 96px;
            height: 96px;
            border-radius: 20px;
            box-shadow: 0 4px 24px rgba(0,0,0,0.12);
            margin-bottom: 1.5rem;
            background: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .feature-list {
            margin: 2rem 0 2.5rem 0;
            padding: 0;
            list-style: none;
        }
        .feature-list li {
            margin-bottom: 1.2rem;
            font-size: 1.15rem;
            display: flex;
            align-items: center;
        }
        .feature-list i {
            color: #ffe082;
            margin-right: 0.8rem;
            font-size: 1.3rem;
        }
        .install-btn {
            background: #ffe082;
            color: #764ba2;
            border: none;
            padding: 14px 32px;
            border-radius: 30px;
            font-size: 1.2rem;
            font-weight: bold;
            box-shadow: 0 4px 16px rgba(255,224,130,0.18);
            transition: background 0.2s, color 0.2s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .install-btn:active, .install-btn:focus {
            background: #ffd54f;
            color: #4b2e83;
        }
        .already-installed {
            margin-top: 2rem;
            color: #b2ff59;
            font-size: 1.1rem;
            font-weight: 500;
        }
        .footer {
            color: #eee;
            font-size: 0.95rem;
            text-align: center;
            margin-top: auto;
            padding-bottom: 1.2rem;
        }
    </style>
</head>
<body>
    <div class="container text-center">
        <div class="app-logo">
            <img src="/static/icons/icon-96x96.png" alt="FASTag App Logo" width="72" height="72">
        </div>
        <h1 class="fw-bold mb-2" style="font-size:2.1rem;">Get FASTag Parking App</h1>
        <p class="mb-4" style="font-size:1.15rem; color:#ffe082;">Seamless parking management, right on your phone!</p>
        <ul class="feature-list">
            <li><i class="fas fa-car"></i> Real-time vehicle access & tracking</li>
            <li><i class="fas fa-map-marker-alt"></i> Manage multiple parking locations</li>
            <li><i class="fas fa-wallet"></i> Check FASTag balances instantly</li>
            <li><i class="fas fa-bolt"></i> Fast, offline-ready performance</li>
            <li><i class="fas fa-bell"></i> Instant notifications & alerts</li>
            <li><i class="fas fa-lock"></i> Secure, private, and always available</li>
        </ul>
        <button id="installAppBtn" class="install-btn" style="display:none;">
            <i class="fas fa-download"></i> Install App
        </button>
        <div id="alreadyInstalledMsg" class="already-installed" style="display:none;">
            <i class="fas fa-check-circle"></i> App is already installed!<br>
            <span>Open it from your home screen.</span>
        </div>
    </div>
    <div class="footer">
        Powered by FASTag Parking Management &mdash; Enjoy hassle-free parking!
    </div>
    <script>
    // Detect if running as PWA
    function isInStandaloneMode() {
        return (window.matchMedia('(display-mode: standalone)').matches) || (window.navigator.standalone === true);
    }
    // Detect mobile
    function isMobile() {
        return /Android|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop/i.test(navigator.userAgent);
    }
    // Show install prompt if not installed
    let deferredPrompt;
    window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
        if (!isInStandaloneMode() && isMobile()) {
            document.getElementById('installAppBtn').style.display = 'inline-flex';
        }
    });
    document.getElementById('installAppBtn').addEventListener('click', function() {
        if (deferredPrompt) {
            deferredPrompt.prompt();
            deferredPrompt.userChoice.then((choiceResult) => {
                if (choiceResult.outcome === 'accepted') {
                    document.getElementById('installAppBtn').style.display = 'none';
                    document.getElementById('alreadyInstalledMsg').style.display = 'block';
                }
                deferredPrompt = null;
            });
        }
    });
    // On load, show correct UI
    window.addEventListener('DOMContentLoaded', function() {
        if (isInStandaloneMode()) {
            document.getElementById('alreadyInstalledMsg').style.display = 'block';
        } else if (isMobile()) {
            // If beforeinstallprompt hasn't fired yet, show install button after a delay
            setTimeout(function() {
                if (!deferredPrompt) {
                    document.getElementById('installAppBtn').style.display = 'inline-flex';
                }
            }, 1200);
        }
    });
    // Optionally, try to open the app if already installed (deep link)
    // (This is browser/OS dependent and not always reliable)
    </script>
</body>
</html> 