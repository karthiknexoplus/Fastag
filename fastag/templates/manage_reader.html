{% extends 'base.html' %}
{% block title %}Manage Reader - FASTag Parking{% endblock %}
{% block content %}
<div class="container-fluid" style="max-width: 520px;">
    <div class="card shadow-sm border-0 p-4" style="border-radius: 18px;">
        <h3 class="mb-4" style="color: #764ba2; font-weight: 700; letter-spacing: 1px;">
            <i class="fas fa-microchip me-2"></i>Manage Reader for Lane: <span style="color: #4b2e83;">{{ lane['lane_id'] }}</span>
        </h3>
        <form method="POST" class="needs-validation" novalidate>
            <div class="mb-3">
                <label class="form-label fw-bold" style="color: #764ba2;"><i class="fas fa-id-card me-1"></i> Reader ID</label>
                <input type="text" name="reader_id" class="form-control rounded-pill" value="{{ reader['reader_id'] if reader else '' }}" required>
            </div>
            <div class="mb-3">
                <label class="form-label fw-bold" style="color: #764ba2;"><i class="fas fa-wifi me-1"></i> Reader IP</label>
                <input type="text" name="reader_ip" class="form-control rounded-pill" value="{{ reader['reader_ip'] if reader else '' }}" required>
            </div>
            <div class="mb-3">
                <label class="form-label fw-bold" style="color: #764ba2;"><i class="fas fa-microchip me-1"></i> MAC Address</label>
                <input type="text" class="form-control rounded-pill" value="00:00:00:00" readonly>
            </div>
            <div class="d-flex justify-content-end gap-2 mt-3">
                <button type="submit" class="btn btn-primary rounded-pill px-4" style="background: #764ba2; border: none;">
                    <i class="fas fa-save me-1"></i> Save
                </button>
                {% if reader %}
                <form method="POST" action="{{ url_for('readers.delete_reader_for_lane', lane_id=lane['id']) }}" style="display:inline;">
                    <button type="submit" class="btn btn-danger rounded-pill px-4" onclick="return confirm('Delete this reader?');">
                        <i class="fas fa-trash-alt me-1"></i> Delete
                    </button>
                </form>
                {% endif %}
                <a href="{{ url_for('lanes.lanes', location_id=lane['location_id']) }}" class="btn btn-secondary rounded-pill px-4"><i class="fas fa-arrow-left me-1"></i> Back</a>
            </div>
        </form>
        {% if reader %}
        <div class="card p-3 mt-4 border-0 shadow-sm" style="border-radius: 14px; background: #f3e9ff;">
            <h5 class="mb-3" style="color: #764ba2; font-weight: 600;"><i class="fas fa-cogs me-2"></i>Actions</h5>
            <div class="d-flex gap-3 flex-wrap">
                <form method="POST" action="{{ url_for('readers.open_barrier', id=reader['id']) }}" onsubmit="return confirm('Open barrier for this reader?');">
                    <button type="submit" class="btn rounded-pill px-3" style="background: #28a745; color: white;">
                        <i class="fas fa-door-open me-1"></i> Open Barrier
                    </button>
                </form>
                <a href="{{ url_for('readers.rfid_rfpower_page') }}" class="btn rounded-pill px-3" style="background: #17a2b8; color: white;" onclick="return confirm('Edit RF Power for this reader?');">
                    <i class="fas fa-broadcast-tower me-1"></i> RF Power
                </a>
                <a href="{{ url_for('readers.manage_reader', lane_id=lane['id']) }}" class="btn rounded-pill px-3" style="background: #ffc107; color: #333;">
                    <i class="fas fa-pen-to-square me-1"></i> Edit
                </a>
            </div>
        </div>
        {% endif %}
    </div>
</div>
<style>
.card {
    border-radius: 18px;
    transition: transform 0.2s;
}
.card:hover {
    transform: translateY(-2px);
}
.btn-primary:hover, .btn-primary:focus {
    background: #4b2e83 !important;
    color: white !important;
}
.btn-danger:hover, .btn-danger:focus {
    background: #b30000 !important;
    color: white !important;
}
.btn-info:hover, .btn-info:focus {
    background: #117a8b !important;
    color: white !important;
}
.btn-warning:hover, .btn-warning:focus {
    background: #b38600 !important;
    color: white !important;
}
.btn-secondary:hover, .btn-secondary:focus {
    background: #764ba2 !important;
    color: white !important;
}
</style>
{% endblock %} 